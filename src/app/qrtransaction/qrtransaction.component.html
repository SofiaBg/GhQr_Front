
<app-appheader></app-appheader>
<app-appmenu></app-appmenu>


<div class="wrapper">


  <!-- Content Wrapper. Contains page content -->
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
     <!-- SAFIA 20.09.2021 -->
      <!-- <h1>
          QrTransaction      
      </h1> -->
    </section>
    <section class="content-header">
      <div class="callout callout-danger" *ngIf='hide==false'>
        <h4>Warning!</h4>

        <p>{{err.toString()}}</p>
      </div>
      <div class="alert alert-warning alert-dismissible" *ngIf="showalert==true">
        <button type="button" class="close"  (click)="closealert()" data-dismiss="alert" aria-hidden="true">&times;</button>
        <h4><i class="icon fa fa-check"></i> Alert!</h4>
        {{msg}}
      </div>

      <!-- Main content -->
      <div class="row" *ngIf="hidemain==false">
        <fieldset class="col-md-12">

          <div class="panel panel-default">
            <div class="panel-body">

              <div class="box-header">
                <h3 class="box-title"> All Qrtransaction</h3>

                <div class="box-tools">
                  <div class="input-group input-group-sm" style="    width: 300px;">

                    <input type="text" name="motCle"  [(ngModel)]="mot" class="form-control pull-right" placeholder="Search By Merchant Name">

                    <div class="input-group-btn">
                      <button  gtype="submit" class="btn btn-default" (click)="getTransaction1(mot)" ><i class="fa fa-search"></i></button>
                      <!--<input type="button" value="Report" class="btn btn-a" (click)="downloadPDF()">-->
                    </div>
                  </div>
                </div>
              </div>
              <!-- /.box-header -->
              <fieldset class="col-md-12"  *ngIf="hidemain1==true">
      
                <div class="panel panel-default">
                  <div class="panel-body">
            
                    <div class="box-header">
            
                      <h3 class="box-title">  </h3>
            
                      <div class="box-body table-responsive no-padding">
                        <!--<table id="example" class="table table-hover">-->
                        <table class="table table-hover">
                          <thead class="thead-dark bg-info">
            
                          <tr>
                            
                <th>Client Name</th> <th> Receipt Code</th> <th> Amount</th> <th> Transaction Date</th>
            <!--    <th>Merchant Id</th> <th>Store Id</th>--><th> Merchant Name </th><th>  Merchant City </th><th> Country Code </th>
                <th>Currency Code</th> <th> Mcccode ID </th><!--<th>  card_number </th>--><th> Addditional Date </th><!--<th> account_number </th>-->
              </tr>
              </thead>
              <tbody>
             
              <tr *ngFor='let t of qrtransaction1?.content'>
                <td>{{t.user_code}}</td>
                <td>{{t.receipt_code}}</td>
                <td>{{t.amount}}</td>
                <td>{{t.transaction_date.substr(0,10)}}</td>
           <!---     <td>{{t.merchant_id}}</td>
                <td>{{t.store_id}}</td>-->
                <td>{{t.merchant_name}}</td>
                <td>{{t.merchant_city}}</td>
                <td>{{t.country_code}}</td>
                <td>{{t.currency_code}}</td>
                <td>{{t.mcccode}}</td>
           <!--     <td>{{t.card_number}}</td>-->
                <td>{{t.addditional_date.substr(0,10)}}</td>
              <!--  <td>{{t.account_number}}</td>-->
              </tr>
              </tbody>
                        </table>
                        <div class="mt-8">
                          <div class="pull-left" id="nbPages">
                              {{pagesMerch.length}} pages
                          </div>

                          <div class="input-group pagination-w pull-right">
                            <span class="input-group-btn">
                                <button id="btnBlack" type="submit" class="btn btn-primary" (click)="gotoPage1(currentpage-1)" [disabled]="currentpage<=0">Previous</button>
                            </span>
                            <form  (ngSubmit)="gotoPageFromInput()"><input id="paginationValue" type="text" class="form-control" value="{{currentpage+1}}" (keyup)="onKey($event)"/></form>
                            <span class="input-group-btn">
                                <button id="btnBlack" type="submit" class="btn btn-primary" (click)="gotoPage1(currentpage+1)" [disabled]="currentpage+1>=pagesMerch.length">Next</button>
                            </span>
                          </div>
                        </div>
                    </div>
                  </div>
            
                  </div> 
                  </div>
                    </fieldset>

                    <fieldset class="col-md-12"  *ngIf="hidemain2==true">
      
                      <div class="panel panel-default">
                        <div class="panel-body">
                  
                          <div class="box-header">
                  
                            <h3 class="box-title">  </h3>
                  
                            <div class="box-body table-responsive no-padding">
                              <table class="table table-hover">
                                <thead class="thead-dark bg-info">
                  
                                <tr>
                                  
                      <th>Client Name</th> <th> Receipt Code</th> <th> Amount</th> <th> Transaction Date</th>
                  <!--    <th>Merchant Id</th> <th>Store Id</th>--><th> Merchant Name </th><th>  Merchant City </th><th> Country Code </th>
                      <th>Currency Code</th> <th> Mcccode ID </th><!--<th>  card_number </th>--><th> Addditional Date </th><!--<th> account_number </th>-->
                    </tr>
                    </thead>
                    <tbody>
                   
                    <tr *ngFor='let t of qrtransaction'>
                      <td>{{t.user_code}}</td>
                      <td>{{t.receipt_code}}</td>
                      <td>{{t.amount}}</td>
                      <td>{{t.transaction_date.substr(0,10)}}</td>
                 <!---     <td>{{t.merchant_id}}</td>
                      <td>{{t.store_id}}</td>-->
                      <td>{{t.merchant_name}}</td>
                      <td>{{t.merchant_city}}</td>
                      <td>{{t.country_code}}</td>
                      <td>{{t.currency_code}}</td>
                      <td>{{t.mcccode}}</td>
                 <!--     <td>{{t.card_number}}</td>-->
                      <td>{{t.addditional_date.substr(0,10)}}</td>
                    <!--  <td>{{t.account_number}}</td>-->
                    </tr>
                    </tbody>
                              </table>
                  
                  
                           <!--   <div class="box-footer clearfix">
                                <ul class="pagination pagination-sm no-margin pull-right">
          
                                <li *ngFor="let p of pagesMerch;let i=index" [ngClass]="{'active':i==currentpage}">
                                <a class="clickable"  (click)="gotoPage1(i)">{{i}}</a>
                              </li>
                            </ul>
                          </div>-->
                          </div>
                        </div>
                  
                        </div> 
                        </div>
                          </fieldset>

                    
                    
                  </div>
      
    



    </div>

</fieldset>

</div>
<!-- /.content-wrapper -->
<!-- Control Sidebar -->
<div class="control-sidebar-bg"></div>
<!-- ./wrapper -->

<script>
    $(function () {
        $('#example1').DataTable()
        $('#example2').DataTable({
            'paging'      : true,
            'lengthChange': false,
            'searching'   : false,
            'ordering'    : true,
            'info'        : true,
            'autoWidth'   : false
        })
    })
    $(function loadImage(url) {
      return new Promise((resolve) => {
        let img = new Image();
        img.onload = () => resolve(img);
        img.src = url;
      })
    })
</script>
